<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Miami Open Data Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Promoting open data and open government in Miami and Miami-Dade County.">
    <link rel="shortcut icon" href="favicon.ico" />
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
    
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- NAVBAR
    ================================================== -->
    <div class="navbar-wrapper">
      <!-- Wrap the .navbar in .container to center it within the absolutely positioned parent. -->
      <div class="container">

        <div class="navbar navbar-fixed-top navbar-inverse">
          <div class="navbar-inner">
            <!-- Responsive Navbar Part 1: Button for triggering responsive navbar. Include responsive CSS to utilize. -->
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <a class="brand" href="#"><span class="c4mred">Miami</span> <span class="c4mblue">Open Data Survey</span></a>
            <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li class="active"><a href="#About">About the Survey</a></li>
                <li><a href="#Survey">The Survey</a></li>
                <li><a href="#Results">Results</a></li>
                <li><a href="#Supporters">Supporters</a></li>
                <li><a href="#Contact">Contact us</a></li>
                </ul>
            </div><!--/.nav-collapse -->
          </div><!-- /.navbar-inner -->
        </div><!-- /.navbar -->

      </div> <!-- /.container -->
    </div><!-- /.navbar-wrapper -->


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->


 <hr class="featurette-divider">

      <div class="featurette">
        <img class="featurette-image pull-left" id="About" style="padding-bottom: 75px" src="images/data.png" width = "200" height = "144" alt="data" />
        <h2 class="featurette-heading"><span class="c4mblue">Miami Open Data Survey:</span> <br/><span class="muted">Seeking insight from candidates on local transparency and records access.</span></h2>
        <p class="lead">
         We are <a href="http://codeformiami.org">Code for Miami,</a> a local, volunteer brigade of <a href="http://codeforamerica.org">Code for America,</a> a non-profit organization of citizens, technologists and public servants working together to address civic and community issues through open data and technology. We’re sending every local candidate in the 2014 elections this survey to help voters understand candidates' ideas and approaches on transparency and open data. 

        <h3>What is open data?</h3>
        <p>Open data is the idea that citizens should have quick and inexpensive access to download and use the raw data that governments control. Historically, access to this data has only been available via formal data requests to government entities, sometimes at significant expense. Nationally, Code for America has helped launch more than 20 civic applications created by citizens to make to government services more accessible to constituents. Across the nation, cities are enabling this access by passing resolutions, executive orders, and ordinances that promote or mandate the release of city data.</p>
        
        <h3>Why does open data matter?</h3>
        <p>We think that open access to government data is a vital issue. It is the tool of government transparency for our time, the foundation of community and civic technology innovation, and an enabler of democratic participation in government processes. For these reasons, we would like to understand the stance of candidates for Mayor, County Commission and City Councils regarding open data.</p>
    
      </div>

  <hr class="featurette-divider">

      <div class="featurette">
      <img name="groups" id="survey" class="featurette-image pull-left" src="images/questions.png" alt="questions" />
        <h2 class="featurette-heading">The Survey</h2>
        <p class="lead">Here are the questions we're sending candidates:</p>
        <p><i>Candidate responses will be published by Code for Miami and shared with media.</i></p>
 
        <p class="lead"><a name = "Q1" class = "qnumbs">1.</a> What is your general view on government making Open Data available to citizens? Based on your experience, does Miami currently provide enough Open Data?</p>
        <p class="lead"><a name = "Q2" class = "qnumbs">2.</a> How will your administration use technology and information to create new opportunities for resident participation in public decision-making processes?</p>
        <p class="lead"><a name = "Q3" class = "qnumbs">3.</a> How will your administration support making Open Data available for economic development and social entrepreneurship? </p>
        <p class="lead"><a name = "Q4" class = "qnumbs">4.</a> If elected would you consider signing an “Open Data” pledge?</p>

      </div>

      <hr class="featurette-divider">

      <div class="featurette">
        <a id="Results">
          <img name="groups" class="featurette-image pull-left" src="images/community.png" width = "200" height = "144" alt="community" />
        </a>
        <h2 class="featurette-heading">Results</h2>
        <p class="lead">Results that we have received are listed below. Candidates who have responded to the survey are listed first. Candidates who have not responded are listed after.        
        <p class="lead"><b>MIAMI CITY COMMISSION RACE</b></p>        
        <h3>Alex Dominguez</h3>
       <p><a href = "#Q1" class = "qnumbs">1.</a> I support the idea of open data similar to what other major cities are doing. Presently is a too difficult and time consuming to request public documents in the City of Miami. We need a more open and transparent system.</p>
        <p><a href = "#Q2" class = "qnumbs">2.</a> Would need to have a sit down with developers and technicians to custom build a system that is both practical and sustainable.</p>
        <p><a href = "#Q3" class = "qnumbs">3.</a> Open minded to discussing new ideas and possibilities for Open Data. Would like more data and info on how it's working in other cities.</p>
        <p><a href = "#Q4" class = "qnumbs">4.</a> Yes.</p>       
       
        <h3>Robert Malone, Jr.</h3>
       <p><a href = "#Q1" class = "qnumbs">1.</a> I completely support Open Data.  I want all residents, business owners, stakeholders and visitors to have much more access to information.  As I knock on doors and as I attend meetings I constantly hear that the City of Miami needs to make information more accessible.  In fact, many people claim the City all too often makes it incredibly difficult for citizens to get information. The information available on the official New York City website is incredible.  That should be Miami's goal.</p>
        <p><a href = "#Q2" class = "qnumbs">2.</a>If elected, I will immediately request a meeting with your group and other experts in Open Code.  Then I will request a meeting with the City Manager. I definitely want to see the Freedom of Information Act Requests (Chp 119) handled much more quickly and much less expensively.  I have heard many terrible stories about citizens being shunted aside.  Often the City will provide Chp 119 production in .pst format which few citizens can open.  Open Code can help encourage more businesses to open in Miami.</p>
        <p><a href = "#Q3" class = "qnumbs">3.</a>I will need to become better informed.  I know your group and other like minded groups can provide great information.  I favor polls.  I favor easy to find and understand websites.  I very much respect the City of New York and the incredible amount of information available on its website.</p>
        <p><a href = "#Q4" class = "qnumbs">4.</a> Yes.</p>    
        <h3>Frank Carollo</h3>
        <p>No response</p>
        <h3>Richard Paul Dunn II</h3>
        <p>No response</p>
        <h3>Keon Hardemon</h3>
        <p>No response</p>
        <h3>Jacquetta “Jacqui” Colyer</h3>
        <p>No response</p>
        <p class="lead"><b>MIAMI CITY MAYOR'S RACE</b></p>        
        <h3>Williams Ambrister</h3>
        <p><a href = "#Q1" class = "qnumbs">1.</a> Visit-<a href="http://www.yourservant.org">www.yourservant.org</a></p>
        <p><a href = "#Q2" class = "qnumbs">2.</a> Visit-<a href="http://www.yourservant.org">www.yourservant.org</a></p>
        <p><a href = "#Q3" class = "qnumbs">3.</a> Visit-<a href="http://www.yourservant.org">www.yourservant.org</a></p>
        <p><a href = "#Q4" class = "qnumbs">4.</a> Visit-<a href="http://www.yourservant.org">www.yourservant.org</a></p>
        <h3>Tom Baumann</h3>
        <p>No response</p>
        <h3>Jeffrey Anthony Benjamin</h3>
        <p>No response</p>
        <h3>Tomås RegaladoTomås Regalado</h3>
        <p>No response</p>
        <p class="lead"><b>MIAMI BEACH MAYOR'S RACE</b></p>        
        <h3>Steve Berke</h3>
        <p>No response.</p>  
        <h3>Michael Gongora</h3>
        <p>No response.</p>  
        <h3>Philip Levine</h3>
        <p>No response.</p> 
        <p class="lead"><b>MIAMI BEACH CITY COMMISSION RACE</b></p>        
        <h3>Mohammed Islam</h3>
        <p>No response.</p> 
        <h3>Sherry Kaplan Roberts</h3>
        <p>No response.</p>
        <h3>Micky Steinberg</h3>
        <p>No response.</p>  
          <h3>Elsa Urquiza</h3>
        <p>No response.</p>          
            <h3>Dave Crystal</h3>
        <p>No response.</p>  
        <h3>Jorge Exposito</h3>
        <p>No response.</p>
        <h3>Micahel Greico</h3>
        <p>No response.</p>
        <h3>Matti Herrera Bower</h3>
        <p>No response.</p>
        <h3>Joy Malakoff</h3>
        <p>No response.</p>
      <div class="featurette">
        <img class="featurette-image pull-left" id="Supporters" style="padding-bottom: 75px" src="images/handshake.png" width = "200" height = "144" alt="handshake" />
        <h2 class="featurette-heading">Supporters</h2>
        <p class="lead">The following organizations have signed on to support this effort:</p>
        <p><a href="http://spjsofla.net"><img src="images/spjLogo.png" width="50" alt="SPJ Florida logo">Society of Professional Journalists Florida</a></p>
      </div>

      <hr class="featurette-divider">

      <div class="featurette">
        <h2 id="Contact" class="featurette-heading">Contact us</h2>
        <p class="lead">Code for Miami Brigade Captains are Ernie Hsiung (<a href="mailto:ehsiung@codeforamerica.org">ehsiung at codeforamerica.org</a> ) and Rebekah Monson (<a href="mailto:rmonson@codeforamerica.org">rmonson at codeforamerica.org</a> ). If you have questions or comments about the survey, we want to hear from you.</p>
      </div>

      <hr class="featurette-divider">

      <!-- /END THE FEATURETTES -->


      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>...People trying to Make Miami-Dade County even better...</p>
        <p>Built and Maintained by <a href="http://codeformiami.org">Code for Miami. </a> Site Design Based on <a href="http://twitter.github.com/bootstrap">Bootstrap</a>, Some Images Provided by <a href="http://thenounproject.com">The Noun Project</a> and <a href="http://aerostylaz.deviantart.com/gallery/?q=miami">Aerostylaz</a>.</p>
      </footer>

    </div><!-- /.container -->
  </body>
<script src="js/bootstrap-tooltip.js">
// Include the UserVoice JavaScript SDK (only needed once on a page)
UserVoice=window.UserVoice||[];(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/yprmU4gNZhVrvP2N9ks2cQ.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})();

//
// UserVoice Javascript SDK developer documentation:
// https://www.uservoice.com/o/javascript-sdk
//

// Set colors
UserVoice.push(['set', {
  accent_color: '#448dd6',
  trigger_color: 'white',
  trigger_background_color: '#448dd6'
}]);

// Identify the user and pass traits
// To enable, replace sample data with actual user traits and uncomment the line
UserVoice.push(['identify', {
  //email:      'john.doe@example.com', // User’s email address
  //name:       'John Doe', // User’s real name
  //created_at: 1364406966, // Unix timestamp for the date the user signed up
  //id:         123, // Optional: Unique id of the user (if set, this should not change)
  //type:       'Owner', // Optional: segment your users by type
  //account: {
  //  id:           123, // Optional: associate multiple users with a single account
  //  name:         'Acme, Co.', // Account name
  //  created_at:   1364406966, // Unix timestamp for the date the account was created
  //  monthly_rate: 9.99, // Decimal; monthly rate of the account
  //  ltv:          1495.00, // Decimal; lifetime value of the account
  //  plan:         'Enhanced' // Plan name for the account
  //}
}]);

// Add default trigger to the bottom-right corner of the window:
UserVoice.push(['addTrigger', { mode: 'smartvote', trigger_position: 'bottom-right' }]);

// Or, use your own custom trigger:
//UserVoice.push(['addTrigger', '#id', { mode: 'smartvote' }]);

// Autoprompt for Satisfaction and SmartVote (only displayed under certain conditions)
UserVoice.push(['autoprompt', {}]);
</script>
<script>  	

  $(document).ready(function(){	
	

	    $('.carousel').carousel({
	      interval: 5000
	    })

    //GLOBAL VARIABLES HERE//
 var apiKey = "2975b6e4c43147824522959761677",
        meetupGroupUrl = "Code-for-Miami";

    var memberList = new Array();
   
    //get the next event
    $.getJSON("http://api.meetup.com/2/events?status=upcoming&order=time&limited_events=False&group_urlname=Code-For-Miami&desc=false&offset=0&format=json&page=20&fields=&sig_id=14485765&sig=ee64791e1ab7c9e6f82c5f5e47c85118fa698fd6&callback=?",function(upcomingData) { 

      eventTime = upcomingData.results[0].time;
      
      //currentTime = eventTime + 1 //testing value
      currentTime = new Date().getTime();
      eventEndTime = eventTime + 60000*60*3;
      //eventEndTime = eventTime + upcomingData.results[0].duration;
      //the above line only works if a specific end time is set.

      //console.log("Current Time is " + currentTime)
      //console.log("Event End Time is " + eventEndTime);
      eventId = upcomingData.results[0].id;

      if (currentTime >= eventTime && currentTime < eventEndTime) { 
        //console.log("Time to rock!");
        
        var memberbox = "<div class='memberbox'></div>";
        $(".carousel-caption").append(memberbox);
        //$(".memberbox").hide();

        //testing value for eventId
        //eventId = "113850802";

      function showThumbnails() {
        
        //get the checkin data for the next event
        $.getJSON("https://api.meetup.com/2/checkins?key="+apiKey+"&sign=true&event_id="+eventId+"&page=20&callback=?",function(checkinData) {

            howMany = checkinData.meta.count;

            //if there's nobody checked in, there's nothing to see here.  
            if (howMany === 0) {

              console.log("Nobody is checked in yet.");

              $(".memberbox").html("<h2>Nobody has checked in yet.</h2>");
              $(".memberbox").slideDown();
              

            //else, let's get those thumbnails up and running.  
            } else if (howMany >= 1) {

              $.each(checkinData.results, function(i,checkinData) {

                //console.log(checkinData.member_id);

                $.getJSON("https://api.meetup.com/2/member/"+checkinData.member_id+"?key="+apiKey+"&&sign=true&page=20&callback=?", function(memberData) { 
                    
                    var memberName = memberData.name,
                        toolTips = "<a class='tip' href='#' data-toggle='tooltip' data-placement='bottom' data-original-title='"+memberData.name+"'>", 
                        memberPix  = memberData.photo.thumb_link,
                        memberThumb = toolTips +"<img class='pix-thumb' src='"+memberPix+"' alt='"+ memberData.name +"'/></a>";
                    
                    if (memberList.indexOf(memberName) === -1) {
                        
                        memberList.push(memberName);
                        $(memberThumb).appendTo($(".memberbox"));

                    } else {
                      //do nothing
                    } 
                                      
                    $('.tip').tooltip();

                });

              });

              //event information  
              $.getJSON("https://api.meetup.com/2/events?key="+apiKey+"&sign=true&event_id="+eventId+"&page=20&callback=?", function(eventData) { 

                  var eventName = eventData.results[0].name,
                    eventLocation = eventData.results[0].venue.name,
                    eventStAddress = eventData.results[0].venue.address_1,
                    eventCity = eventData.results[0].venue.city,
                    eventState = eventData.results[0].venue.state,
                    eventURL = eventData.results[0].event_url,
                    memberCount = memberList.length,
                    eventCheckin = "<p id='checkins'>"+memberCount+" Civic Hackers are checked in at <a href='http://maps.google.com/maps?q="+eventStAddress+" "+eventCity+" "+eventState+"'>"+eventLocation+"</a> for <a href='"+eventURL+"'>"+eventName+"</a>.</p>";

                  console.log(memberCount);

                $(window).load(function(){

                  $(eventCheckin).appendTo($(".memberbox"));
                  $(".memberbox").slideDown();

                });

              });            
              
            }

          });
      
      }

      showThumbnails();



      } else {
        console.log("Nothing to see here.");
      }

      });

    });

</script>
</html>
